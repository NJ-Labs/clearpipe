{{/*
NOTE: This is a template for secrets. In production, use external secrets management.
The actual secrets should be created separately or using tools like:
- Kubernetes Secrets
- HashiCorp Vault
- AWS Secrets Manager
- Azure Key Vault
- Sealed Secrets
*/}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "clearpipe.fullname" . }}-secrets
  labels:
    {{- include "clearpipe.labels" . | nindent 4 }}
type: Opaque
stringData:
  # IMPORTANT: Replace these with actual secure values in production!
  # These are placeholder values for development only.
  
  # PostgreSQL credentials
  postgres-password: {{ .Values.postgresql.auth.postgresPassword | default "CHANGE_ME_postgres_password" | quote }}
  
  # JWT Secret - minimum 32 characters
  jwt-secret: {{ .Values.supabase.jwtSecret | default "super-secret-jwt-token-with-at-least-32-characters-long" | quote }}
  
  # Supabase API Keys
  anon-key: {{ .Values.supabase.anonKey | default "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0" | quote }}
  service-role-key: {{ .Values.supabase.serviceRoleKey | default "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU" | quote }}
  
  # Realtime secret key base
  secret-key-base: {{ .Values.supabase.secretKeyBase | default "UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq" | quote }}
  
  # Database connection string
  database-url: "postgres://{{ include "clearpipe.postgresql.username" . }}:{{ .Values.postgresql.auth.postgresPassword | default "CHANGE_ME_postgres_password" }}@{{ include "clearpipe.postgresql.host" . }}:{{ include "clearpipe.postgresql.port" . }}/{{ include "clearpipe.postgresql.database" . }}"
